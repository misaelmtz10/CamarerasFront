<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/img/Corona.ico" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="/css/edit.css">
    <link rel="stylesheet" href="/css/mdb.min.css">
    <title>Historial</title>
</head>

<body>
    <nav class="mb-1 navbar navbar-expand-lg navbar-dark" style="background-image: linear-gradient(-45deg, #4481eb 0%, #04befe 100%);">
        <a class="navbar-brand" href="#" style="color: whitesmoke !important;">Historial de Edificios</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-4"
            style="background-image: linear-gradient(-45deg, #4481eb 0%, #04befe 100%);"
            aria-controls="navbarSupportedContent-4" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fa-solid fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/pages/home.html">
                        <i class="fa-solid fa-house-user"></i>&nbsp; Home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/index.html">
                        <i class="fa-solid fa-person-walking-arrow-right"></i>&nbsp; Cerrar Sesi√≥n</a>
                </li>
            </ul>
        </div>
    </nav>
    <!--/.Navbar -->
    <div class="card card-cascade narrower border border-light">
        <div class="py-2 d-flex justify-content-between align-items-center"
        style="background: #22254C;">
            <div class="row">
                <label for=""></label>
            </div>
            <div class="form-outline col-sm-4">
                <input id="searchTerm" type="text" onkeyup="doSearch()" class="search form-control form-icon-trailing"
                    style="color:#fff ;" />
                <label class="form-label" style="color: #fff;">Buscar Registro</label>
            </div>
            <div>
                <label for=""></label>
            </div>
        </div>
        <p>

        <table id="datos" class="table align-middle mb-0 bg-white results">

            <thead class="bg-light">
                <tr style="color: #22254C;" class="text-center">
                    <th><b>Fecha</b></th>
                    <th><b>Hora</b></th>
                    <th><b>Tipo de actividad</b></th>
                </tr>
            </thead>
            <tbody class="text-center">
                <tr>
                    <td>27 de octubre de 2022</td>
                    <td>11:55 A.M</td>
                    <td><span class="badge rounded-pill badge-primary"
                            style="background-image: linear-gradient(-45deg, #4481eb 0%, #04befe 100%);">Limpiado</span>
                    </td>
                </tr>
                <tr>
                    <td>25 de octubre de 2022</td>
                    <td>17:00 P.M</td>
                    <td><span class="badge rounded-pill badge-primary"
                            style="background-image: linear-gradient(-45deg, #4481eb 0%, #04befe 100%);">Limpiado</span>
                    </td>
                </tr>
                <tr>
                    <td>24 de octubre de 2022</td>
                    <td>11:59 A.M</td>
                    <td><span class="badge rounded-pill badge-danger"
                            style="background-image: linear-gradient(-45deg, #eb4444 0%, #fe044b 100%);">Incidencia</span>
                    </td>
                </tr>
                <tr>
                    <td>22 de octubre de 2022</td>
                    <td>19:00 P.M</td>
                    <td><span class="badge rounded-pill badge-primary"
                            style="background-image: linear-gradient(-45deg, #4481eb 0%, #04befe 100%);">Limpiado</span>
                    </td>
                </tr>
                <tr class='noSearch hide'>

                    <td colspan="5"></td>

                </tr>
            </tbody>

        </table>

        </p>
    </div>


    <script src="/js/app.js"></script>

    <!-- MDB -->
    <script type="text/javascript" src="/js/mdb.min.js"></script>
    <!-- Custom scripts -->

    <script>
        function doSearch() {

            const tableReg = document.getElementById('datos');

            const searchText = document.getElementById('searchTerm').value.toLowerCase();

            let total = 0;

            // Recorremos todas las filas con contenido de la tabla

            for (let i = 1; i < tableReg.rows.length; i++) {

                // Si el td tiene la clase "noSearch" no se busca en su contenido

                if (tableReg.rows[i].classList.contains("noSearch")) {

                    continue;

                }



                let found = false;

                const cellsOfRow = tableReg.rows[i].getElementsByTagName('td');

                // Recorremos todas las celdas

                for (let j = 0; j < cellsOfRow.length && !found; j++) {

                    const compareWith = cellsOfRow[j].innerHTML.toLowerCase();

                    // Buscamos el texto en el contenido de la celda

                    if (searchText.length == 0 || compareWith.indexOf(searchText) > -1) {

                        found = true;

                        total++;

                    }

                }

                if (found) {

                    tableReg.rows[i].style.display = '';

                } else {

                    // si no ha encontrado ninguna coincidencia, esconde la

                    // fila de la tabla

                    tableReg.rows[i].style.display = 'none';

                }

            }



            // mostramos las coincidencias

            const lastTR = tableReg.rows[tableReg.rows.length - 1];

            const td = lastTR.querySelector("td");

            lastTR.classList.remove("hide", "red");

            if (searchText == "") {

                lastTR.classList.add("hide");

            } else if (total) {

                td.innerHTML = "Se ha encontrado " + total + " coincidencia" + ((total > 1) ? "s" : "");

            } else {

                lastTR.classList.add("red");

                td.innerHTML = "No se han encontrado coincidencias";

            }

        }
    </script>
</body>

</html>